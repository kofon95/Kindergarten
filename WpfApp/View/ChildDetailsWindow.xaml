<Window x:Class="WpfApp.View.ChildDetailsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp.View"
        xmlns:m="clr-namespace:DAL.Model;assembly=DAL"
        xmlns:converter="clr-namespace:WpfApp.View.Converter"
        xmlns:system="clr-namespace:System;assembly=mscorlib"
        xmlns:templateSelector="clr-namespace:WpfApp.View.TemplateSelector"
        mc:Ignorable="d"
        Title="ChildDetailsWindow" Height="567.036" Width="761.717"
		Name="ThisWindow">

	<TabControl>
		<TabItem Header="Информация о ребёнке">
			<DockPanel>
				<StackPanel Width="150" Background="Aqua" DockPanel.Dock="Right"></StackPanel>
				<StackPanel DockPanel.Dock="Left" DataContext="{Binding CurrentChild}">
					<TextBlock Text="Информация о ребёнке"/>
					<Separator Height="5"/>
					<Grid ShowGridLines="True">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>
						<StackPanel>
							<StackPanel>
								<WrapPanel Margin="4">
									<TextBlock Text="ФИО" Margin="5 5"/>
									<TextBox MinWidth="30" MaxLength="64" Padding="5" Text="{Binding Path=Person.LastName, UpdateSourceTrigger=PropertyChanged}"/>
									<TextBox MinWidth="30" MaxLength="64" Padding="5" Text="{Binding Path=Person.FirstName, UpdateSourceTrigger=PropertyChanged}"/>
									<TextBox MinWidth="30" MaxLength="64" Padding="5" Text="{Binding Path=Person.Patronymic, UpdateSourceTrigger=PropertyChanged}"/>
								</WrapPanel>
							</StackPanel>
							<Label Margin="0 10 0 0" >
								<WrapPanel>
									<TextBlock Text="Возраст: "/>
									<TextBlock Text="{Binding Path=BirthDate, Converter={StaticResource YearsOldConverter}}"/>
								</WrapPanel>
							</Label>
							<Label Margin="0 10 0 0" >
								<WrapPanel>
									<Label Content="Дата рождения: "/>
									<DatePicker SelectedDateFormat="Long" SelectedDate="{Binding BirthDate}" />
								</WrapPanel>
							</Label>
							<Label Margin="0 10 0 0" >
								<WrapPanel>
									<TextBlock Text="Дата зачисления: "/>
									<TextBlock Text="{Binding LastEnterChild.EnterDate, Converter={StaticResource DateConverter}}"/>
								</WrapPanel>
							</Label>

							<Label Margin="0 10 0 0" >
								<WrapPanel>
									<Label Content="Пол:"/>
									<ComboBox Height="24" ItemsSource="{StaticResource Sexes}" SelectedItem="{Binding Sex}" ItemTemplate="{StaticResource SexesDataTemplate}"/>
								</WrapPanel>
							</Label>
						</StackPanel>
						<StackPanel Grid.Column="1">
							<Label>
								<WrapPanel>
									<Label Content="Группа: "/>
									<Label>
										<Label.Content>
											<TextBlock>
												<TextBlock.Text>
													<MultiBinding StringFormat="{}{0} ({1})">
														<Binding Path="Group.Name"/>
														<Binding Path="Group.GroupType" Converter="{StaticResource GroupsConverter}"/>
													</MultiBinding>
												</TextBlock.Text>
											</TextBlock>
										</Label.Content>
									</Label>
									<!--<ComboBox DataContext="{Binding ElementName=ThisWindow, Path=DataContext}" ItemsSource="{Binding Groups}"
											  SelectedItem="{Binding CurrentChild.Group}" ItemTemplate="{StaticResource GroupTypeDataTemplate}"/>-->
								</WrapPanel>
							</Label>
							<Label>
								<WrapPanel>
									<Label Content="Адрес:"/>
									<TextBox Padding="5" Text="{Binding LocationAddress}"></TextBox>
								</WrapPanel>
							</Label>

							<Label>
								<WrapPanel>
									<Label Content="Тариф:"/>
									<ComboBox DataContext="{Binding ElementName=ThisWindow, Path=DataContext}" ItemsSource="{Binding Tarifs}"
											  SelectedItem="{Binding CurrentChild.Tarif}" ItemTemplateSelector="{StaticResource TarifComboBoxDataTemplateSelector}"/>
								</WrapPanel>
							</Label>
							
							<Label>
								<WrapPanel>
									<Label Content="Необходимо оплатить:"/>
									<Label Content="???"/>
								</WrapPanel>
							</Label>
						</StackPanel>
					</Grid>
					<StackPanel DataContext="{Binding ElementName=ThisWindow, Path=DataContext}">
						<StackPanel.Resources>
							<converter:BoolConverter x:Key="EnableConverter">
								<converter:BoolConverter.True>sdf</converter:BoolConverter.True>
							</converter:BoolConverter>
						</StackPanel.Resources>
						<TextBlock Text="В архиве:"/>
						<TextBox Text="{Binding CurrentChildIsArchived, Mode=OneWay}"/>
						<TextBox IsEnabled="{Binding CurrentChildIsArchived, Converter={StaticResource EnableConverter}, ConverterParameter={x:Static converter:BoolConverter.Reverce}}"
								 Name="ArchiveNote" Style="{StaticResource PlaceHolderTextBox}" Tag="Примечание..."/>
						<Button IsEnabled="{Binding CurrentChildIsArchived, Converter={StaticResource EnableConverter}, ConverterParameter={x:Static converter:BoolConverter.Reverce}}"
								Command="{Binding AddChildToArchiveCommand}" CommandParameter="{Binding ElementName=ArchiveNote, Path=Text}" Content="Сохранить и отправить в архив"/>
						<Button IsEnabled="{Binding CurrentChildIsArchived, Converter={StaticResource EnableConverter}}"
								Command="{Binding RemoveChildFromArchiveCommand}" Content="Сохранить и убрать из архива"/>
					</StackPanel>
					
					<TextBox IsReadOnly="True" Text="{Binding Path=Id}"/>
					<Button DataContext="{Binding ElementName=ThisWindow, Path=DataContext}"
					        Command="{Binding ChangeGroupCommand}" Content="Перевести в другую группу..."/>
					<CheckBox Content="На исключение" IsChecked="{Binding IsNobody}"/>
					<Image MaxHeight="400" Source="{Binding Person.PhotoPath, Converter={StaticResource ChildImageConverter}}"/>
					<Button DataContext="{Binding ElementName=ThisWindow, Path=DataContext}"
					        Command="{Binding UpdateChildCommand}" Content="Применить"/>
				</StackPanel>
			</DockPanel>
		</TabItem>
		<TabItem Header="Лицевой счет">

		</TabItem>
	</TabControl>
</Window>
